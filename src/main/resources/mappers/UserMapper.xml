<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 해당 부분의 namespace는 project package + Mapper Package + Mapper Interface 이름입니다. -->
<mapper namespace="com.ktds.uhddaeyo.mapper.UserMapper">
<!-- 해당 부분의 id는 MapperClass의 함수 이름과 유사하여야 합니다. -->
	<select id="loginCheck" resultType="String">
		SELECT name FROM user WHERE id = #{id} AND pw = #{passwd} 
	</select>
	
	<select id="viewMember" resultType="com.ktds.uhddaeyo.model.dto.UserDto">
		SELECT user_no AS no, id, pw AS passwd, name, type FROM user
		WHERE id = #{id} AND pw = #{passwd}
	</select>
  
	<select id="idCheck" parameterType="String" resultType="Integer">
		SELECT COUNT(*) FROM user WHERE id = #{userId}
	</select>
	
	<insert id="insertGuest" parameterType="com.ktds.uhddaeyo.model.dto.GuestDto">
		INSERT INTO user (id, pw, name, tel, age, gender, type) VALUES
		(#{id}, #{passwd}, #{name}, #{tel}, #{age}, #{gender}, 1)
	</insert>
	
	<!-- <select id="selectReservationList" resultType="com.ktds.uhddaeyo.model.dto.ReservationDto">
		SELECT place_name, address, message, resv_date FROM suggestion, place
		WHERE place.place_no = suggestion.place_no
		and isresv = 'Y' and date(resv_date) > date(now()) 
		</select>
		-->
	
	<select id="selectReservationList" resultType="hashmap">
		SELECT place_name, address, message, resv_date FROM suggestion, place 
		WHERE place.place_no = suggestion.place_no 
		and isresv = 'Y' and date(resv_date) > date(now()) and suggestion.user_no = #{userNo}
	</select>
		
		<!-- WHERE user_no = #{id} -->
	
</mapper>